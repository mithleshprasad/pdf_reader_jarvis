<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        textarea {
            resize: none;
        }
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark-mode textarea, .dark-mode input {
            background-color: #2d3748;
            color: #e2e8f0;
            border-color: #4a5568;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-gray-800 {
            color: #e2e8f0;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col transition-colors duration-300">
    <div class="flex-1 flex flex-col w-full max-w-4xl mx-auto p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-4">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold text-gray-800 dark:text-gray-200">Notepad</h1>
                <button id="darkModeBtn" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700">
                    <svg id="darkModeIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </button>
            </div>
            <input id="noteTitle" class="w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600" placeholder="Note Title">
            <div class="flex justify-between mb-4 space-x-2">
                <button id="saveBtn" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition">Save</button>
                <button id="clearBtn" class="flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition">Clear</button>
                <button id="printBtn" class="flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition">Export PDF</button>
                <select id="fontSize" class="p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600">
                    <option value="12">Small (12px)</option>
                    <option value="16" selected>Medium (16px)</option>
                    <option value="20">Large (20px)</option>
                </select>
            </div>
            <textarea id="noteContent" class="w-full h-[calc(100vh-300px)] p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600" placeholder="Write your notes here..."></textarea>
            <div class="flex justify-between mt-2">
                <p id="status" class="text-sm text-gray-600 dark:text-gray-400"></p>
                <p id="wordCount" class="text-sm text-gray-600 dark:text-gray-400">Words: 0</p>
            </div>
        </div>
    </div>

    <script>
        const noteTitle = document.getElementById('noteTitle');
        const noteContent = document.getElementById('noteContent');
        const saveBtn = document.getElementById('saveBtn');
        const clearBtn = document.getElementById('clearBtn');
        const printBtn = document.getElementById('printBtn');
        const fontSize = document.getElementById('fontSize');
        const status = document.getElementById('status');
        const wordCount = document.getElementById('wordCount');
        const darkModeBtn = document.getElementById('darkModeBtn');
        const darkModeIcon = document.getElementById('darkModeIcon');

        // Load saved data
        window.onload = () => {
            const savedNote = localStorage.getItem('note');
            const savedTitle = localStorage.getItem('noteTitle');
            const savedFontSize = localStorage.getItem('fontSize') || '16';
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (savedNote) noteContent.value = savedNote;
            if (savedTitle) noteTitle.value = savedTitle;
            noteContent.style.fontSize = `${savedFontSize}px`;
            fontSize.value = savedFontSize;
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                darkModeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />';
            }
            updateWordCount();
        };

        // Auto-save every 5 seconds
        noteContent.addEventListener('input', () => {
            updateWordCount();
            clearTimeout(window.autoSave);
            window.autoSave = setTimeout(() => {
                localStorage.setItem('note', noteContent.value);
                localStorage.setItem('noteTitle', noteTitle.value);
                status.textContent = 'Auto-saved!';
                setTimeout(() => status.textContent = '', 2000);
            }, 5000);
        });

        // Manual save
        saveBtn.addEventListener('click', () => {
            localStorage.setItem('note', noteContent.value);
            localStorage.setItem('noteTitle', noteTitle.value);
            status.textContent = 'Note saved!';
            setTimeout(() => status.textContent = '', 2000);
        });

        // Clear note
        clearBtn.addEventListener('click', () => {
            noteContent.value = '';
            noteTitle.value = '';
            localStorage.removeItem('note');
            localStorage.removeItem('noteTitle');
            status.textContent = 'Note cleared!';
            updateWordCount();
            setTimeout(() => status.textContent = '', 2000);
        });

        // Generate and download PDF
        printBtn.addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const title = noteTitle.value || 'Untitled Note';
            const content = noteContent.value || 'No content';
            doc.setFontSize(20);
            doc.text(title, 10, 10);
            doc.setFontSize(12);
            const lines = doc.splitTextToSize(content, 180);
            doc.text(lines, 10, 20);
            doc.save(`${title || 'note'}.pdf`);
            status.textContent = 'PDF downloaded!';
            setTimeout(() => status.textContent = '', 2000);
        });

        // Font size adjustment
        fontSize.addEventListener('change', () => {
            noteContent.style.fontSize = `${fontSize.value}px`;
            localStorage.setItem('fontSize', fontSize.value);
        });

        // Dark mode toggle
        darkModeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            darkModeIcon.innerHTML = isDarkMode
                ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />'
                : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />';
        });

        // Update word count
        function updateWordCount() {
            const words = noteContent.value.trim().split(/\s+/).filter(word => word.length > 0).length;
            wordCount.textContent = `Words: ${words}`;
        }
    </script>
</body>
</html>
